<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>S√≠laba D (Jogo) - Casa Bil√≠ngue Kids</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&family=Poppins:wght@400;500;600;700&family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <style>
        /* Configura√ß√µes Globais */
        body { font-family: 'Poppins', sans-serif; background-color: #f0f7ff; color: #333; scroll-behavior: smooth; -webkit-font-smoothing: antialiased; }
        .kids-font { font-family: 'Fredoka', sans-serif; }
        
        /* Cart√µes */
        .card-word { 
            background: white; 
            border-radius: 24px; 
            border: 3px solid #e0e7ff; 
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            transition: all 0.3s ease; 
            height: 100%; 
            display: flex; 
            flex-direction: column; 
            overflow: hidden;
        }
        .card-word:hover { transform: translateY(-5px); box-shadow: 0 15px 30px rgba(0,0,0,0.1); border-color: #a78bfa; }
        
        /* Bot√µes de S√≠laba (Interativos para o Jogo) */
        .syllable-game-btn { 
            background: #f3f0ff; 
            border: 2px solid #ddd6fe; 
            color: #6d28d9; 
            padding: 8px 16px; 
            border-radius: 12px; 
            font-weight: 700; 
            font-size: 1.3rem; 
            cursor: pointer; 
            font-family: 'Fredoka', sans-serif;
            transition: all 0.2s;
            user-select: none;
            min-width: 50px;
            -webkit-tap-highlight-color: transparent;
        }
        .syllable-game-btn:hover { background: #e9d5ff; transform: scale(1.05); }
        .syllable-game-btn:active { transform: scale(0.95); }

        /* Estados do Jogo */
        .syllable-correct {
            background-color: #22c55e !important;
            border-color: #16a34a !important;
            color: white !important;
            transform: scale(1.1);
            box-shadow: 0 0 10px rgba(34, 197, 94, 0.5);
            pointer-events: none;
        }
        
        .syllable-wrong {
            animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both;
            background-color: #fee2e2 !important;
            border-color: #ef4444 !important;
            color: #b91c1c !important;
        }

        @keyframes shake {
            10%, 90% { transform: translate3d(-1px, 0, 0); }
            20%, 80% { transform: translate3d(2px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
            40%, 60% { transform: translate3d(4px, 0, 0); }
        }

        /* Bot√£o Imagem */
        .emoji-container { position: relative; }
        .emoji-btn { cursor: pointer; transition: transform 0.2s; -webkit-tap-highlight-color: transparent; }
        .emoji-btn.completed { animation: pulse-green 1s infinite; }
        @keyframes pulse-green {
            0% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(34, 197, 94, 0); }
            100% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0); }
        }

        /* Bot√µes de √Åudio */
        .btn-audio { 
            background: #e0f2fe; color: #0284c7; width: 32px; height: 32px; border-radius: 50%; 
            display: inline-flex; align-items: center; justify-content: center; cursor: pointer; 
            border: 1px solid #bae6fd; transition: background 0.2s; flex-shrink: 0;
            -webkit-tap-highlight-color: transparent;
        }
        .btn-audio:hover { background: #0ea5e9; color: white; }
        
        /* Tipografia */
        .transcription { color: #ea580c; font-weight: 600; font-size: 0.9rem; }
        .translation-text { color: #64748b; font-size: 0.85rem; font-weight: 500; display: block; margin-top: 2px; }
        .simplified-pron { color: #7c3aed; font-size: 0.8rem; font-style: italic; opacity: 0.9; }

        /* Navega√ß√£o */
        .header-sticky { position: sticky; top: 0; z-index: 50; background: rgba(240, 247, 255, 0.95); backdrop-filter: blur(12px); padding: 10px 0; border-bottom: 1px solid #e0e7ff; }
        .nav-dot { width: 50px; height: 50px; display: flex; align-items: center; justify-content: center; border-radius: 50%; color: white; font-weight: bold; font-family: 'Fredoka', sans-serif; text-decoration: none; transition: transform 0.2s; }
        .nav-dot:hover { transform: scale(1.15); }

        /* Vocab Grid */
        .vocab-grid { display: grid; grid-template-columns: 1fr; gap: 12px; }
        @media (min-width: 768px) { .vocab-grid { grid-template-columns: repeat(2, 1fr); } }
        @media (min-width: 1024px) { .vocab-grid { grid-template-columns: repeat(3, 1fr); } }
        .vocab-item { background: white; border: 1px solid #e2e8f0; border-radius: 12px; padding: 12px 16px; display: flex; align-items: center; justify-content: space-between; }
        .vocab-content { flex: 1; display: flex; flex-direction: column; }
        .vocab-en { font-family: 'Inter', sans-serif; font-weight: 700; color: #1e293b; font-size: 1.1rem; }
        .vocab-pt { font-size: 0.75rem; text-transform: uppercase; color: #94a3b8; font-weight: 600; margin-top: 2px; }
        .vocab-ipa { font-family: 'Courier New', monospace; color: #f59e0b; font-size: 0.85rem; margin-top: 2px; }
        
        .btn-nav-main { transition: all 0.3s; box-shadow: 0 4px 0 rgba(0,0,0,0.1); display: inline-flex; align-items: center; justify-content: center; gap: 8px; }
        .btn-nav-main:hover { transform: translateY(-2px); box-shadow: 0 6px 0 rgba(0,0,0,0.1); }
    </style>
</head>
<body class="p-3 md:p-6 pb-20">

    <div class="max-w-7xl mx-auto">
        <!-- Navega√ß√£o Topo -->
        <div class="flex flex-col sm:flex-row justify-center gap-4 mb-8">
            <a href="https://espaco-liberdade.github.io/inglesipa/" class="btn-nav-main bg-indigo-600 text-white font-bold py-3 px-8 rounded-full text-center w-full sm:w-auto"><span>üè†</span> Voltar ao Menu</a>
            <a href="https://espaco-liberdade.github.io/silabasbilingue" class="btn-nav-main bg-orange-500 text-white font-bold py-3 px-8 rounded-full text-center w-full sm:w-auto"><span>üî§</span> Menu S√≠labas</a>
        </div>

        <header class="text-center mb-6">
            <h1 class="kids-font text-4xl md:text-5xl text-purple-600 mb-2 drop-shadow-sm">CASA BIL√çNGUE KIDS</h1>
            <p class="text-orange-500 font-semibold italic text-sm md:text-base">O jeito mais natural de criar um pequeno bil√≠ngue</p>
            <div class="inline-block bg-yellow-400 px-6 py-2 rounded-full mt-4 shadow-md transform rotate-1">
                <span class="kids-font text-xl text-white tracking-wide">M√≥dulo: Letra D (Jogo das S√≠labas)</span>
            </div>
        </header>

        <div class="header-sticky mb-8 rounded-xl">
            <nav class="flex justify-center gap-2 md:gap-4 py-2 flex-wrap px-2">
                <a href="#sec-da" class="nav-dot bg-red-400">DA</a>
                <a href="#sec-de" class="nav-dot bg-blue-400">DE</a>
                <a href="#sec-di" class="nav-dot bg-green-400">DI</a>
                <a href="#sec-do" class="nav-dot bg-orange-400">DO</a>
                <a href="#sec-du" class="nav-dot bg-purple-400">DU</a>
                <a href="#sec-dao" class="nav-dot bg-yellow-500 text-sm">D√ÉO</a>
            </nav>
            <div class="text-center mt-2">
                <span class="text-[11px] font-bold text-indigo-600 bg-indigo-50 px-3 py-1 rounded-full border border-indigo-200">üéÆ DESAFIO: Clique nas s√≠labas embaralhadas na ordem certa!</span>
            </div>
        </div>

        <div id="content-area">
            <section id="sec-da" class="mb-16 scroll-mt-32">
                <div class="flex items-center gap-3 mb-6 border-b-4 border-red-100 pb-2">
                    <div class="w-10 h-10 bg-red-500 rounded-full flex items-center justify-center text-white font-bold shadow-md">13</div>
                    <h2 class="kids-font text-3xl text-red-500">Fam√≠lia do DA</h2>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="grid-da"></div>
            </section>

            <section id="sec-de" class="mb-16 scroll-mt-32">
                <div class="flex items-center gap-3 mb-6 border-b-4 border-blue-100 pb-2">
                    <div class="w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold shadow-md">14</div>
                    <h2 class="kids-font text-3xl text-blue-500">Fam√≠lia do DE</h2>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="grid-de"></div>
            </section>

            <section id="sec-di" class="mb-16 scroll-mt-32">
                <div class="flex items-center gap-3 mb-6 border-b-4 border-green-100 pb-2">
                    <div class="w-10 h-10 bg-green-500 rounded-full flex items-center justify-center text-white font-bold shadow-md">15</div>
                    <h2 class="kids-font text-3xl text-green-500">Fam√≠lia do DI</h2>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="grid-di"></div>
            </section>

            <section id="sec-do" class="mb-16 scroll-mt-32">
                <div class="flex items-center gap-3 mb-6 border-b-4 border-orange-100 pb-2">
                    <div class="w-10 h-10 bg-orange-500 rounded-full flex items-center justify-center text-white font-bold shadow-md">16</div>
                    <h2 class="kids-font text-3xl text-orange-500">Fam√≠lia do DO</h2>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="grid-do"></div>
            </section>

            <section id="sec-du" class="mb-16 scroll-mt-32">
                <div class="flex items-center gap-3 mb-6 border-b-4 border-purple-100 pb-2">
                    <div class="w-10 h-10 bg-purple-500 rounded-full flex items-center justify-center text-white font-bold shadow-md">17</div>
                    <h2 class="kids-font text-3xl text-purple-500">Fam√≠lia do DU</h2>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="grid-du"></div>
            </section>

            <section id="sec-dao" class="mb-16 scroll-mt-32">
                <div class="flex items-center gap-3 mb-6 border-b-4 border-yellow-100 pb-2">
                    <div class="w-10 h-10 bg-yellow-600 rounded-full flex items-center justify-center text-white font-bold shadow-md">18</div>
                    <h2 class="kids-font text-3xl text-yellow-600">O Som do D√ÉO</h2>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="grid-dao"></div>
            </section>
        </div>

        <section class="mt-20 bg-white p-6 rounded-3xl border-4 border-gray-100 shadow-xl">
            <div class="text-center mb-8">
                <h2 class="kids-font text-3xl text-gray-700">üìö Resumo do Vocabul√°rio</h2>
                <p class="text-gray-400 text-sm">Toque no alto-falante para praticar a pron√∫ncia</p>
            </div>
            <div id="vocab-container" class="vocab-grid"></div>
        </section>

        <div class="flex flex-col sm:flex-row justify-center gap-4 mt-12 mb-8">
            <a href="https://espaco-liberdade.github.io/inglesipa/" class="btn-nav-main bg-indigo-600 text-white font-bold py-4 px-8 rounded-2xl text-center w-full sm:w-auto text-lg"><span>üè†</span> Voltar ao Menu Principal</a>
        </div>
        
        <footer class="text-center text-gray-400 text-xs pb-4">
            <p>&copy; 2024 Casa Bil√≠ngue Kids - Desenvolvido por F√°bio de Almeida</p>
        </footer>
    </div>

    <script>
        // --- CONFIGURA√á√ÉO DE √ÅUDIO PARA IOS/MOBILE ---
        let audioCtx = null;

        function initAudio() {
            if (!audioCtx) {
                audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            }
            if (audioCtx.state === 'suspended') {
                audioCtx.resume();
            }
        }

        function playSound(type) {
            initAudio(); // Tenta destravar √°udio no toque
            if (!audioCtx) return;

            const oscillator = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            oscillator.connect(gainNode);
            gainNode.connect(audioCtx.destination);

            const now = audioCtx.currentTime;

            if (type === 'plim') {
                oscillator.type = 'sine';
                oscillator.frequency.setValueAtTime(880, now);
                oscillator.frequency.exponentialRampToValueAtTime(1760, now + 0.1);
                gainNode.gain.setValueAtTime(0.3, now);
                gainNode.gain.exponentialRampToValueAtTime(0.001, now + 0.5);
                oscillator.start(now);
                oscillator.stop(now + 0.5);
            } else if (type === 'error') {
                oscillator.type = 'sawtooth';
                oscillator.frequency.setValueAtTime(150, now);
                oscillator.frequency.linearRampToValueAtTime(100, now + 0.2);
                gainNode.gain.setValueAtTime(0.3, now);
                gainNode.gain.linearRampToValueAtTime(0.001, now + 0.3);
                oscillator.start(now);
                oscillator.stop(now + 0.3);
            } else if (type === 'success') {
                [523.25, 659.25, 783.99].forEach((freq, i) => {
                    const osc = audioCtx.createOscillator();
                    const gn = audioCtx.createGain();
                    osc.connect(gn);
                    gn.connect(audioCtx.destination);
                    osc.type = 'triangle';
                    osc.frequency.value = freq;
                    gn.gain.setValueAtTime(0.2, now + (i * 0.1));
                    gn.gain.linearRampToValueAtTime(0.001, now + 0.8 + (i * 0.1));
                    osc.start(now + (i * 0.1));
                    osc.stop(now + 1.2);
                });
            }
        }

        // --- DADOS DA LETRA D ---
        const data = {
            da: [
                { pt: "DA-DO", en: "Dice", tr: "(D√ÅIS)", emoji: "üé≤", s1: "Roll the dice.", t1: "Jogue o dado.", st1: "(/r√¥ul d√¢ d√°is/)", s2: "A white dice.", t2: "Um dado branco.", st2: "(/√™ u√°it d√°is/)" },
                { pt: "DA-MA", en: "Checkers", tr: "(TCH√â-K√äRS)", emoji: "üèÅ", s1: "Let's play checkers.", t1: "Vamos jogar damas.", st1: "(/l√©ts pl√™i tch√©-k√™rs/)", s2: "I won the game.", t2: "Eu ganhei o jogo.", st2: "(/ai u√≥n d√¢ gu√™im/)" },
                { pt: "DAN-√áA", en: "Dance", tr: "(D√âNS)", emoji: "üíÉ", s1: "I love to dance.", t1: "Eu amo dan√ßar.", st1: "(/ai l√¢v tu d√©ns/)", s2: "Dance with me.", t2: "Dance comigo.", st2: "(/d√©ns u√≠d mi/)" },
                { pt: "DAR-DO", en: "Dart", tr: "(D√ÅRT)", emoji: "üéØ", s1: "Throw the dart.", t1: "Jogue o dardo.", st1: "(/thr√¥u d√¢ d√°rt/)", s2: "Hit the target.", t2: "Acerte o alvo.", st2: "(/h√≠t d√¢ t√°r-guet/)" },
                { pt: "DA-MAS-CO", en: "Apricot", tr: "(EI-PRI-K√ìT)", emoji: "üçë", s1: "Sweet apricot.", t1: "Damasco doce.", st1: "(/ei-pri-k√≥t/)", s2: "Dried apricot.", t2: "Damasco seco.", st2: "(/dr√°id ei-pri-k√≥t/)" }
            ],
            de: [
                { pt: "DE-DO", en: "Finger", tr: "(F√çN-GU√äR)", emoji: "‚òùÔ∏è", s1: "Show me your finger.", t1: "Mostre-me seu dedo.", st1: "(/sh√¥u mi i√≥r f√≠n-gu√™r/)", s2: "Five fingers.", t2: "Cinco dedos.", st2: "(/f√°iv f√≠n-gu√™rs/)" },
                { pt: "DEN-TE", en: "Tooth", tr: "(T√öTH)", emoji: "ü¶∑", s1: "Brush your tooth.", t1: "Escove seu dente.", st1: "(/br√¢sh i√≥r t√∫th/)", s2: "The tooth fairy.", t2: "A fada do dente.", st2: "(/d√¢ t√∫th f√©-ri/)" },
                { pt: "DE-ZEM-BRO", en: "December", tr: "(DI-S√âM-B√äR)", emoji: "üóìÔ∏è", s1: "Christmas is in December.", t1: "O Natal √© em dezembro.", st1: "(/kr√≠s-m√¢s iz in di-s√©m-b√™r/)", s2: "Cold December.", t2: "Dezembro frio.", st2: "(/k√¥uld di-s√©m-b√™r/)" },
                { pt: "DE-TE-TI-VE", en: "Detective", tr: "(DI-T√âK-TIV)", emoji: "üïµÔ∏è", s1: "The detective looks.", t1: "O detetive olha.", st1: "(/d√¢ di-t√©k-tiv luks/)", s2: "Smart detective.", t2: "Detetive esperto.", st2: "(/sm√°rt di-t√©k-tiv/)" },
                { pt: "DE-SER-TO", en: "Desert", tr: "(D√â-Z√äRT)", emoji: "üèúÔ∏è", s1: "Hot desert.", t1: "Deserto quente.", st1: "(/h√≥t d√©-z√™rt/)", s2: "Sand in the desert.", t2: "Areia no deserto.", st2: "(/s√©nd in d√¢ d√©-z√™rt/)" }
            ],
            di: [
                { pt: "DI-A", en: "Day", tr: "(D√äI)", emoji: "‚òÄÔ∏è", s1: "Have a nice day.", t1: "Tenha um bom dia.", st1: "(/h√©v √™ n√°is d√™i/)", s2: "Sunny day.", t2: "Dia ensolarado.", st2: "(/s√¢-ni d√™i/)" },
                { pt: "DI-A-MAN-TE", en: "Diamond", tr: "(D√ÅI-M√îND)", emoji: "üíé", s1: "Shiny diamond.", t1: "Diamante brilhante.", st1: "(/sh√°i-ni d√°i-m√¥nd/)", s2: "A diamond ring.", t2: "Um anel de diamante.", st2: "(/√™ d√°i-m√¥nd r√≠ng/)" },
                { pt: "DI-NOS-SAU-RO", en: "Dinosaur", tr: "(D√ÅI-N√î-S√ìR)", emoji: "ü¶ñ", s1: "Big dinosaur.", t1: "Dinossauro grande.", st1: "(/big d√°i-n√¥-s√≥r/)", s2: "The dinosaur roars.", t2: "O dinossauro ruge.", st2: "(/d√¢ d√°i-n√¥-s√≥r r√≥rs/)" },
                { pt: "DI-NHEI-RO", en: "Money", tr: "(M√Ç-NI)", emoji: "üíµ", s1: "Save your money.", t1: "Guarde seu dinheiro.", st1: "(/s√™iv i√≥r m√¢-ni/)", s2: "Pocket money.", t2: "Mesada.", st2: "(/p√≥-ket m√¢-ni/)" },
                { pt: "DIS-CO", en: "Record", tr: "(R√â-K√îRD)", emoji: "üíø", s1: "Play the record.", t1: "Toque o disco.", st1: "(/pl√™i d√¢ r√©-k√¥rd/)", s2: "Old record.", t2: "Disco antigo.", st2: "(/√¥uld r√©-k√¥rd/)" }
            ],
            do: [
                { pt: "DO-CE", en: "Candy", tr: "(K√âN-DI)", emoji: "üç¨", s1: "I want a candy.", t1: "Eu quero um doce.", st1: "(/ai u√≥nt √™ k√©n-di/)", s2: "Sweet candy.", t2: "Doce a√ßucarado.", st2: "(/su√≠t k√©n-di/)" },
                { pt: "DO-MI-N√ì", en: "Domino", tr: "(D√ì-MI-N√îU)", emoji: "üÅ†", s1: "Play dominoes.", t1: "Jogue domin√≥.", st1: "(/pl√™i d√≥-mi-n√¥uz/)", s2: "Black and white domino.", t2: "Domin√≥ preto e branco.", st2: "(/bl√©k √©nd u√°it d√≥-mi-n√¥u/)" },
                { pt: "DO-ZE", en: "Twelve", tr: "(TU-√âLV)", emoji: "1Ô∏è‚É£2Ô∏è‚É£", s1: "Twelve eggs.", t1: "Doze ovos.", st1: "(/tu-√©lv √©gz/)", s2: "It is twelve o'clock.", t2: "S√£o doze horas.", st2: "(/it iz tu-√©lv √¥-kl√≥k/)" },
                { pt: "DOR-MIR", en: "Sleep", tr: "(SL√çP)", emoji: "üò¥", s1: "Time to sleep.", t1: "Hora de dormir.", st1: "(/t√°im tu sl√≠p/)", s2: "Sleep well.", t2: "Durma bem.", st2: "(/sl√≠p u√©l/)" },
                { pt: "DO-EN-TE", en: "Sick", tr: "(S√çK)", emoji: "ü§í", s1: "I feel sick.", t1: "Eu me sinto doente.", st1: "(/ai f√≠l s√≠k/)", s2: "He is sick.", t2: "Ele est√° doente.", st2: "(/h√≠ iz s√≠k/)" }
            ],
            du: [
                { pt: "DU-EN-DE", en: "Elf", tr: "(√âLF)", emoji: "üçÄ", s1: "The elf is small.", t1: "O duende √© pequeno.", st1: "(/d√¢ √©lf iz sm√≥l/)", s2: "Green elf.", t2: "Duende verde.", st2: "(/gr√≠n √©lf/)" },
                { pt: "DU-CHA", en: "Shower", tr: "(SH√ÅU-√äR)", emoji: "üöø", s1: "Take a shower.", t1: "Tome uma ducha.", st1: "(/t√™ik √™ sh√°u-√™r/)", s2: "Hot shower.", t2: "Ducha quente.", st2: "(/h√≥t sh√°u-√™r/)" },
                { pt: "DU-NA", en: "Dune", tr: "(D√öN)", emoji: "üèúÔ∏è", s1: "Sand dune.", t1: "Duna de areia.", st1: "(/s√©nd d√∫n/)", s2: "High dune.", t2: "Duna alta.", st2: "(/h√°i d√∫n/)" },
                { pt: "DU-RO", en: "Hard", tr: "(H√ÅRD)", emoji: "ü™®", s1: "The rock is hard.", t1: "A pedra √© dura.", st1: "(/d√¢ r√≥k iz h√°rd/)", s2: "Hard work.", t2: "Trabalho duro.", st2: "(/h√°rd u√¥rk/)" },
                { pt: "DU-PLA", en: "Pair", tr: "(P√âR)", emoji: "üëØ", s1: "A pair of friends.", t1: "Uma dupla de amigos.", st1: "(/√™ p√©r √¥v fr√©nds/)", s2: "Good pair.", t2: "Boa dupla.", st2: "(/gud p√©r/)" }
            ],
            dao: [
                { pt: "DE-D√ÉO", en: "Thumb", tr: "(TH√ÇM)", emoji: "üëç", s1: "Thumbs up.", t1: "Ded√£o para cima.", st1: "(/th√¢ms √¢p/)", s2: "My thumb.", t2: "Meu ded√£o.", st2: "(/mai th√¢m/)" },
                { pt: "AL-GO-D√ÉO", en: "Cotton", tr: "(K√ì-T√îN)", emoji: "‚òÅÔ∏è", s1: "Soft cotton.", t1: "Algod√£o macio.", st1: "(/s√≥ft k√≥-t√¥n/)", s2: "Cotton candy.", t2: "Algod√£o doce.", st2: "(/k√≥-t√¥n k√©n-di/)" },
                { pt: "COR-D√ÉO", en: "String", tr: "(STR√çNG)", emoji: "üßµ", s1: "Tie the string.", t1: "Amarre o cord√£o.", st1: "(/t√°i d√¢ str√≠ng/)", s2: "Long string.", t2: "Cord√£o longo.", st2: "(/l√≥ng str√≠ng/)" },
                { pt: "SOL-DA-D√ÉO", en: "Big Soldier", tr: "(B√çG S√îUL-DJ√äR)", emoji: "üíÇ", s1: "A big soldier.", t1: "Um soldad√£o.", st1: "(/√™ big s√¥ul-dj√™r/)", s2: "Toy soldier.", t2: "Soldad√£o de brinquedo.", st2: "(/t√≥i s√¥ul-dj√™r/)" }
            ]
        };

        // --- L√ìGICA DO JOGO ---
        function shuffle(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        window.checkSyllable = function(btn, fullWord, correctSyllableText, cardId) {
            const container = document.getElementById(`syllables-${cardId}`);
            const currentIndex = parseInt(container.dataset.currentIndex);
            const correctOrder = fullWord.split("-");

            if (correctSyllableText === correctOrder[currentIndex]) {
                playSound('plim');
                btn.classList.add('syllable-correct');
                container.dataset.currentIndex = currentIndex + 1;

                if (currentIndex + 1 === correctOrder.length) {
                    setTimeout(() => {
                        playSound('success');
                        const emojiBtn = document.getElementById(`emoji-${cardId}`);
                        emojiBtn.classList.add('completed'); 
                        speakSlowPT(fullWord);
                    }, 500);
                }
            } else {
                playSound('error');
                btn.classList.add('syllable-wrong');
                setTimeout(() => {
                    btn.classList.remove('syllable-wrong');
                }, 500);
            }
        };

        function renderBlocks() {
            const vocabContainer = document.getElementById('vocab-container');
            let cardCounter = 0;

            for (const section in data) {
                const container = document.getElementById(`grid-${section}`);
                if (!container) continue;

                data[section].forEach(item => {
                    cardCounter++;
                    const cardId = `card-${cardCounter}`;
                    const syllablesCorrect = item.pt.split("-");
                    const syllablesToRender = syllablesCorrect.length > 1 ? shuffle(syllablesCorrect) : syllablesCorrect;
                    
                    let sylButtons = syllablesToRender.map(s => 
                        `<button onclick="checkSyllable(this, '${item.pt}', '${s}', '${cardId}')" class="syllable-game-btn">${s}</button>`
                    ).join("");
                    
                    const card = `
                        <div class="card-word">
                            <div class="p-5 flex flex-col items-center gap-4 h-full">
                                <div id="emoji-${cardId}" onclick="speakSlowPT('${item.pt}')" class="emoji-container emoji-btn w-24 h-24 bg-gradient-to-br from-indigo-50 to-white rounded-full flex items-center justify-center text-5xl shadow-inner border border-indigo-100" title="Toque para ouvir em Portugu√™s">
                                    ${item.emoji}
                                </div>
                                <div class="w-full text-center flex-1 flex flex-col">
                                    <div id="syllables-${cardId}" data-current-index="0" class="flex gap-2 mb-4 justify-center flex-wrap">${sylButtons}</div>
                                    <div class="bg-indigo-50 rounded-xl p-3 mb-4 border border-indigo-100">
                                        <div class="flex items-center justify-center gap-3">
                                            <span class="text-2xl font-bold text-indigo-700 uppercase tracking-wide font-sans">${item.en}</span>
                                            <button onclick="speakEN('${item.en}')" class="btn-audio shadow-sm" aria-label="Ouvir em ingl√™s">üîä</button>
                                        </div>
                                        <span class="transcription font-mono mt-1 block">${item.tr}</span>
                                    </div>
                                    <div class="bg-gray-50 p-4 rounded-xl border-l-4 border-indigo-300 text-left space-y-4 mt-auto shadow-sm">
                                        <div class="relative group">
                                            <div class="flex justify-between items-start gap-2">
                                                <span class="text-[13px] font-bold text-gray-800 leading-tight">${item.s1}</span>
                                                <button onclick="speakEN('${item.s1.replace(/'/g, "\\'")}')" class="btn-audio w-6 h-6 text-[10px]" aria-label="Ouvir frase 1">üîä</button>
                                            </div>
                                            <span class="translation-text">${item.t1}</span>
                                            <span class="simplified-pron mt-1 block">${item.st1}</span>
                                        </div>
                                        <div class="relative group border-t border-gray-200 pt-3">
                                            <div class="flex justify-between items-start gap-2">
                                                <span class="text-[13px] font-bold text-gray-800 leading-tight">${item.s2}</span>
                                                <button onclick="speakEN('${item.s2.replace(/'/g, "\\'")}')" class="btn-audio w-6 h-6 text-[10px]" aria-label="Ouvir frase 2">üîä</button>
                                            </div>
                                            <span class="translation-text">${item.t2}</span>
                                            <span class="simplified-pron mt-1 block">${item.st2}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>`;
                    
                    container.innerHTML += card;

                    const vocabCard = `
                        <div class="vocab-item">
                            <div class="vocab-content">
                                <span class="vocab-en">${item.en}</span>
                                <span class="vocab-ipa">${item.tr}</span>
                                <span class="vocab-pt">${item.pt.replace(/-/g, "")}</span>
                            </div>
                            <button onclick="speakEN('${item.en}')" class="btn-audio" aria-label="Ouvir ${item.en}">üîä</button>
                        </div>
                    `;
                    vocabContainer.innerHTML += vocabCard;
                });
            }
        }

        // --- SISTEMA DE FALA OTIMIZADO PARA IPHONE/CHROME ---
        let voices = [];
        function loadVoices() { voices = window.speechSynthesis.getVoices(); }
        if (window.speechSynthesis.onvoiceschanged !== undefined) {
            window.speechSynthesis.onvoiceschanged = loadVoices;
        }
        loadVoices();

        function speakSlowPT(textWithHyphens) {
            if ('speechSynthesis' in window) {
                window.speechSynthesis.cancel();
                const cleanText = textWithHyphens.replace(/-/g, "").toLowerCase();
                const utterance = new SpeechSynthesisUtterance(cleanText);
                utterance.lang = 'pt-BR';
                utterance.rate = 0.8; 
                utterance.pitch = 1.0; 
                window.speechSynthesis.speak(utterance);
            }
        }

        function speakEN(text) {
            if ('speechSynthesis' in window) {
                window.speechSynthesis.cancel();
                const utterance = new SpeechSynthesisUtterance(text);
                
                if (voices.length === 0) loadVoices();
                
                // Tenta encontrar vozes de alta qualidade comuns no iPhone e Chrome
                const targetVoice = 
                    voices.find(v => v.lang === 'en-US' && v.name.includes('Samantha')) || // iPhone Top 1
                    voices.find(v => v.lang === 'en-US' && v.name.includes('Ava')) ||      // iPhone Top 2
                    voices.find(v => v.lang === 'en-US' && v.name.includes('Google US English')) || // Chrome Padr√£o
                    voices.find(v => v.lang === 'en-US' && (v.name.includes('Premium') || v.name.includes('Enhanced'))) ||
                    voices.find(v => v.lang === 'en-US'); // Fallback

                if (targetVoice) { 
                    utterance.voice = targetVoice; 
                    utterance.lang = targetVoice.lang; // Garante o idioma da voz
                } else { 
                    utterance.lang = 'en-US'; 
                }
                
                utterance.rate = 0.85; 
                window.speechSynthesis.speak(utterance);
            }
        }

        window.onload = function() {
            renderBlocks();
            setTimeout(loadVoices, 500);
            document.body.addEventListener('click', function() { initAudio(); }, { once: true });
        };
    </script>
</body>
</html>
